FROM nvidia/cuda:12.2.0-devel-ubuntu22.04

RUN apt-get update -y && \
    apt-get install -y g++ cmake git gdb && \
    apt-get install -y libeigen3-dev && \
    apt-get install -y libginac-dev libcln-dev

RUN git clone https://github.com/osqp/osqp
RUN cd osqp && mkdir build
RUN cd osqp/build && cmake -G "Unix Makefiles" .. -DOSQP_ALGEBRA_BACKEND=cuda
RUN cd osqp/build && cmake --build . --target install